(function(e){function t(t){for(var n,o,i=t[0],l=t[1],c=t[2],d=0,m=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&m.push(r[o][0]),r[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);u&&u(t);while(m.length)m.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],n=!0,i=1;i<a.length;i++){var l=a[i];0!==r[l]&&(n=!1)}n&&(s.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},r={app:0},s=[];function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/sakura-front/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var u=l;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"006b":function(e,t,a){e.exports=a.p+"img/sakura-logo.a9c7be11.png"},"0a5b":function(e,t,a){"use strict";a("24ab")},"1dc2":function(e,t,a){},"24ab":function(e,t,a){},"2a37":function(e,t,a){"use strict";a("5ccf")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",["Login"!==e.$route.name?a("AppHeader"):e._e(),a("v-main",{staticClass:"v-application"},[a("router-view")],1)],1)},s=[],o=(a("b0c0"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("header",[a("v-app-bar",{attrs:{app:"",dark:""}},[a("v-app-bar-nav-icon",{on:{click:function(t){e.drawer=!0}}}),a("v-toolbar-title",[e._v("SAKURA")]),a("v-tabs",{attrs:{dark:""}},[e._l(e.menuItems,(function(t,n){return a("v-tab",{key:n,attrs:{to:t.url}},[e._v(" "+e._s(t.name)+" ")])})),a("v-tab",{on:{click:e.out}},[e._v(" ログアウト ")])],2)],1),a("v-navigation-drawer",{attrs:{temporary:"",fixed:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[a("v-list",{attrs:{nav:"",dense:""}},[a("v-list-item-group",[e._l(e.menuItems,(function(t,n){return a("v-list-item",{key:n,attrs:{to:t.url}},[a("v-list-item-title",[e._v(e._s(t.name))])],1)})),a("v-list-item",{on:{click:e.out}},[a("v-list-item-title",[e._v(" ログアウト ")])],1)],2)],1)],1)],1)}),i=[],l={menuItems:[{name:"HOME",url:"/home"},{name:"送信",url:"/send"},{name:"受信",url:"/timeline"},{name:"プロフィール",url:"/profile"},{name:"フレンド申請",url:"/showrequest"}]},c=a("bc3a"),u=a.n(c),d=function(){return u.a.create({baseURL:"https://13.114.43.226/v1"})},m={name:"AppHeader",data:function(){return{drawer:!1,menuItems:l.menuItems}},methods:{out:function(){var e=this;console.log("aaaaaaaaaaa"),d().delete("/auth/sign_out",{headers:{"access-token":localStorage.getItem("access-token"),uid:localStorage.getItem("uid"),client:localStorage.getItem("client")}}).then((function(t){console.log(t),localStorage.removeItem("uid"),localStorage.removeItem("access-token"),localStorage.removeItem("client"),console.log("ログアウト成功"),e.$router.push({name:"Login"})}))}}},v=m,g=(a("7f4e"),a("2877")),h=a("6544"),f=a.n(h),p=a("40dc"),b=a("5bc1"),_=a("8860"),k=a("da13"),I=a("1baa"),w=a("5d23"),S=a("f774"),y=a("71a3"),V=a("fe57"),x=a("2a7f"),C=Object(g["a"])(v,o,i,!1,null,"e18c9832",null),L=C.exports;f()(C,{VAppBar:p["a"],VAppBarNavIcon:b["a"],VList:_["a"],VListItem:k["a"],VListItemGroup:I["a"],VListItemTitle:w["b"],VNavigationDrawer:S["a"],VTab:y["a"],VTabs:V["a"],VToolbarTitle:x["a"]});var j={data:function(){return{isActive:!1}},name:"App",components:{AppHeader:L},mounted:function(){"Login"!=this.$route.name&&(this.isActive=!0)}},$=j,R=(a("93cb"),a("7496")),M=a("f6c4"),O=Object(g["a"])($,r,s,!1,null,"5d640290",null),F=O.exports;f()(O,{VApp:R["a"],VMain:M["a"]});var A=a("8c4f"),T=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-row",{staticClass:"mt-15"},[a("v-col",{attrs:{cols:"3"}},[a("v-btn",{attrs:{icon:""},on:{click:e.sendMessage}},[a("v-icon",{attrs:{"x-large":""}},[e._v(" mdi-email ")])],1)],1),a("v-col",{attrs:{cols:"9"}},[a("v-card",[a("v-card-text",[e._v(" 送信 ")])],1)],1)],1),a("v-row",{staticClass:"mt-10"},[a("v-col",{attrs:{cols:"3"}},[a("v-btn",{attrs:{icon:""},on:{click:e.receiveMessage}},[a("v-icon",{attrs:{"x-large":""}},[e._v(" mdi-bell ")])],1)],1),a("v-col",{attrs:{cols:"9"}},[a("v-card",[a("v-card-text",[e._v(" 受信 ")])],1)],1)],1),a("v-row",{staticClass:"mt-10"},[a("v-col",{attrs:{cols:"3"}},[a("v-btn",{attrs:{icon:""},on:{click:e.requestFriend}},[a("v-icon",{attrs:{"x-large":""}},[e._v(" mdi-account-search ")])],1)],1),a("v-col",{attrs:{cols:"9"}},[a("v-card",[a("v-card-text",[e._v(" フレンド申請 ")])],1)],1)],1),a("v-row",{staticClass:"mt-10"},[a("v-col",{attrs:{cols:"3"}},[a("v-btn",{attrs:{icon:""},on:{click:e.showProfile}},[a("v-icon",{attrs:{"x-large":""}},[e._v(" mdi-account ")])],1)],1),a("v-col",{attrs:{cols:"9"}},[a("v-card",[a("v-card-text",[e._v(" プロフィール ")])],1)],1)],1),a("v-row",{staticClass:"mt-10"},[a("v-col",{attrs:{cols:"3"}},[a("v-btn",{attrs:{icon:""},on:{click:e.inviteFamiliy}},[a("v-icon",{attrs:{"x-large":""}},[e._v(" mdi-account-plus ")])],1)],1),a("v-col",{attrs:{cols:"9"}},[a("v-card",[a("v-card-text",[e._v(" 家族を招待 ")])],1)],1)],1)],1)},D=[],E={data:function(){return{}},methods:{showProfile:function(){this.$router.push({name:"Profile"})},inviteFamiliy:function(){this.$router.push({name:"ShowRequest"})},sendMessage:function(){this.$router.push({name:"Send"})},receiveMessage:function(){this.$router.push({name:"TimeLine"})},requestFriend:function(){this.$router.push({name:"ShowRequest"})}}},U=E,H=a("8336"),P=a("b0af"),B=a("99d9"),q=a("62ad"),z=a("a523"),Y=a("132d"),G=a("0fd9"),N=Object(g["a"])(U,T,D,!1,null,null,null),J=N.exports;f()(N,{VBtn:H["a"],VCard:P["a"],VCardText:B["c"],VCol:q["a"],VContainer:z["a"],VIcon:Y["a"],VRow:G["a"]});var K=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-row",{staticClass:"mt-5",attrs:{justify:"center"}},[n("img",{attrs:{src:a("006b"),width:"180",height:"180"}})]),n("v-layout",{staticClass:"justify-center",attrs:{wrap:""}},[n("v-flex",{attrs:{xs12:"",sm10:"",md8:""}},[n("v-row",{staticClass:"ml-3 mr-3 mt-7"},[n("v-col",[n("v-text-field",{attrs:{label:"姓",outlined:"",filled:"",rounded:"","background-color":"grey lighten-5"},model:{value:e.lastname,callback:function(t){e.lastname=t},expression:"lastname"}})],1),n("v-col",[n("v-text-field",{attrs:{label:"名",outlined:"",filled:"",rounded:"","background-color":"grey lighten-5"},model:{value:e.firstname,callback:function(t){e.firstname=t},expression:"firstname"}})],1)],1),n("v-row",{staticClass:"ml-3 mr-3 mt-n7"},[n("v-col",[n("v-text-field",{attrs:{label:"メールアドレス",outlined:"",filled:"",rounded:"","background-color":"grey lighten-5"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1)],1),n("v-row",{staticClass:"ml-3 mr-3 mt-n7"},[n("v-col",[n("v-text-field",{attrs:{type:"password",label:"パスワード",outlined:"",filled:"",rounded:"","background-color":"grey lighten-5"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1)],1)],1),n("div",{staticClass:"text-center"},[n("v-row",{staticClass:"mt-n5",attrs:{align:"center"}},[n("v-col",[n("v-btn",{attrs:{depressed:"",rounded:"",color:"blue lighten-3","x-large":""},on:{click:e.signIn}},[e._v(" ログイン ")])],1)],1),n("v-row",{staticClass:"mt-n1",attrs:{align:"center"}},[n("v-col",[n("v-btn",{attrs:{depressed:"",rounded:"",color:"grey lighten-2","x-large":""},on:{click:e.signUp}},[e._v(" 新規ユーザー登録 ")])],1)],1),n("v-row",{staticClass:"justify-center"},[n("v-switch",{staticClass:"ma-1",attrs:{label:"次回から自動ログインする"},model:{value:e.auto,callback:function(t){e.auto=t},expression:"auto"}})],1)],1)],1)},Q=[],W=a("1da1"),X=(a("96cf"),{data:function(){return{firstname:"",lastname:"",name:"",email:"",password:"",title:"",content:"",tasks:[],comment:"",posts:[],user:{},auto:""}},methods:{signUp:function(){var e=this;return Object(W["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.name=e.lastname+" "+e.firstname,console.log(e.name),t.next=4,d().post("/auth",{email:e.email,password:e.password}).then((function(t){localStorage.setItem("access-token",t.headers["access-token"]),localStorage.setItem("client",t.headers["client"]),localStorage.setItem("uid",t.headers["uid"]),localStorage.setItem("id",t.data.data["id"]),e.user={uid:t.headers["uid"],"access-token":t.headers["access-token"],client:t.headers["client"],id:t.data.data["id"]},console.log(e.user),e.$store.dispatch("userLogin",e.user),e.$store.commit("setMessage",{status:!1})}));case 4:return e.id=localStorage.getItem("id"),console.log(e.id),t.next=8,d().put("/users/"+e.id,{email:e.email,password:e.password,name:e.name},{headers:{"access-token":localStorage.getItem("access-token"),uid:localStorage.getItem("uid"),client:localStorage.getItem("client")}});case 8:e.email==localStorage.getItem("uid")&&e.$router.push({name:"Home"});case 9:case"end":return t.stop()}}),t)})))()},signIn:function(){var e=this;console.log(this.email),console.log(this.password),d().post("/auth/sign_in",{email:this.email,password:this.password}).then((function(t){localStorage.setItem("access-token",t.headers["access-token"]),localStorage.setItem("client",t.headers["client"]),localStorage.setItem("uid",t.headers["uid"]),localStorage.setItem("id",t.data.data["id"]),e.user={uid:t.headers["uid"],"access-token":t.headers["access-token"],client:t.headers["client"]},e.$store.dispatch("userLogin",e.user),e.$store.commit("setMessage",{status:!1}),e.email==t.headers["uid"]&&e.$router.push({name:"Home"})}))}}}),Z=X,ee=a("0e8f"),te=a("a722"),ae=a("b73d"),ne=a("8654"),re=Object(g["a"])(Z,K,Q,!1,null,null,null),se=re.exports;f()(re,{VBtn:H["a"],VCol:q["a"],VContainer:z["a"],VFlex:ee["a"],VLayout:te["a"],VRow:G["a"],VSwitch:ae["a"],VTextField:ne["a"]});var oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-card",{attrs:{width:"400px",height:"100%"}},[a("v-list",{attrs:{dense:""}},[a("v-subheader",{staticClass:"text-h5"},[e._v("送信相手")]),a("v-divider"),a("v-list-item-group",{attrs:{color:"primary"}},[e._l(e.frineds,(function(t,n){return a("v-list-item",{key:n},[a("v-list-item-icon",[a("v-avatar",{attrs:{size:"30"}},[a("img",{attrs:{src:e.railsURL+t.avatar_url}})])],1),a("v-list-item-content",[a("v-list-item-title",{staticClass:"text-h8"},[e._v(" "+e._s(t.name))])],1),a("v-list-item-action",[a("v-btn",{attrs:{icon:""},on:{click:function(a){return e.selectFrined(t)}}},[a("v-icon",[e._v(" mdi-arrow-right-bold ")])],1)],1)],1)})),a("v-divider")],2)],1)],1),e.select.name?a("v-card",{staticClass:"mx-auto",attrs:{"max-width":"400","max-height":"100%"}},[a("v-img",{attrs:{src:e.railsURL+e.select.avatar_url,height:"100%",width:"100%"}}),a("v-card-title",[e._v(" "+e._s(e.select.name)+" ")]),a("v-row",[a("v-card-subtitle",[e._v(" "+e._s(e.select.birthdate)+" ")])],1),a("v-container",[a("v-btn",{attrs:{icon:"","x-large":""},on:{click:e.editMessage}},[a("v-icon",{attrs:{"x-large":""}},[e._v(" mdi-email ")])],1)],1)],1):e._e()],1)},ie=[],le={data:function(){return{frineds:{},dialog:!1,select:{name:null,avatar:null,birthdate:null},railsURL:"https://13.114.43.226"}},mounted:function(){var e=this;return Object(W["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d().get("/family/"+localStorage.getItem("id"),{headers:{"access-token":localStorage.getItem("access-token"),uid:localStorage.getItem("uid"),client:localStorage.getItem("client")}}).then((function(t){return console.log(t.data),e.frineds=t.data}));case 2:case"end":return t.stop()}}),t)})))()},methods:{editMessage:function(){console.log(this.select),this.$router.push({name:"SendMessage",params:{to_id:this.select.id}})},selectFrined:function(e){this.select=e}}},ce=le,ue=a("8212"),de=a("ce7e"),me=a("adda"),ve=a("1800"),ge=a("34c3"),he=a("e0c7"),fe=Object(g["a"])(ce,oe,ie,!1,null,null,null),pe=fe.exports;f()(fe,{VAvatar:ue["a"],VBtn:H["a"],VCard:P["a"],VCardSubtitle:B["b"],VCardTitle:B["d"],VContainer:z["a"],VDivider:de["a"],VIcon:Y["a"],VImg:me["a"],VList:_["a"],VListItem:k["a"],VListItemAction:ve["a"],VListItemContent:w["a"],VListItemGroup:I["a"],VListItemIcon:ge["a"],VListItemTitle:w["b"],VRow:G["a"],VSubheader:he["a"]});var be=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-card",[a("v-list",[e._l(e.messages,(function(t,n){return[a("v-list-item",{key:n,on:{click:function(a){return e.showMessage(t)}}},[a("v-list-item-content",[a("v-list-item-title",[e._v(" "+e._s(t.from)+"さんからメッセージが届いています ")])],1),a("v-list-item-action",[a("v-btn",{attrs:{icon:""},on:{click:function(a){return e.deleteMessage(t)}}},[a("v-icon",[e._v(" mdi-delete ")])],1)],1)],1),n+1<e.messages.length?a("v-divider",{key:"divider-"+n}):e._e()]}))],2)],1)],1)},_e=[],ke={data:function(){return{search:"",messages:{},recieved:{}}},mounted:function(){var e=this;d().get("/searches",{headers:{"access-token":localStorage.getItem("access-token"),uid:localStorage.getItem("uid"),client:localStorage.getItem("client")}}).then((function(t){return e.messages=t.data}))},methods:{deleteMessage:function(e){d().delete("/messages/".concat(e.id),{headers:{"access-token":localStorage.getItem("access-token"),uid:localStorage.getItem("uid"),client:localStorage.getItem("client")}})},showMessage:function(e){this.$router.push({name:"Message",params:{content:e}})}}},Ie=ke,we=Object(g["a"])(Ie,be,_e,!1,null,null,null),Se=we.exports;f()(we,{VBtn:H["a"],VCard:P["a"],VContainer:z["a"],VDivider:de["a"],VIcon:Y["a"],VList:_["a"],VListItem:k["a"],VListItemAction:ve["a"],VListItemContent:w["a"],VListItemTitle:w["b"]});var ye=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-container",[a("v-row",{staticClass:"mt-10",attrs:{justify:"center"}},[a("v-col",{attrs:{cols:"2"}},[a("v-avatar",[a("img",{staticStyle:{"object-fit":"cover"},attrs:{src:e.railsURL+e.avatar_url}})])],1),a("v-col",{attrs:{cols:"10"}},[a("v-row",[a("v-col",[e._v(" "+e._s(e.from_name)+" ")]),a("v-col",[e._v(" 件名 : "+e._s(e.message.title)+" ")])],1),a("v-row",[e._v(" "+e._s(e.message.time)+" ← "+e._s(e.message.created_time)+" ")])],1)],1),a("v-container",{staticClass:"mt-10"},[a("v-row",[e._v(" "+e._s(e.message.body)+" ")]),a("v-row",{staticClass:"mt-10"},[a("v-img",{attrs:{src:e.railsURL+e.message.image_url,height:"500","max-width":"500"}})],1)],1)],1)],1)},Ve=[],xe=(a("fb6a"),""),Ce="",Le={data:function(){return{message_id:"",message:{},uploadedImage:"",railsURL:"https://13.114.43.226",avatar_url:"",from_name:""}},created:function(){this.message_id=this.$route.params.message_id,this.avatar_url=this.$route.params.avatar_url,this.from_name=this.$route.params.from_name},mounted:function(){var e=this;d().get("/users/"+localStorage.getItem("id")+"/messages/"+this.message_id,{headers:{"access-token":localStorage.getItem("access-token"),uid:localStorage.getItem("uid"),client:localStorage.getItem("client")}}).then((function(t){return e.message=t.data,xe=new Date(1e3*e.message.time),e.message.time=xe.getFullYear()+"/"+("0"+(xe.getMonth()+1)).slice(-2)+"/"+("0"+xe.getDate()).slice(-2)+" "+("0"+xe.getHours()).slice(-2)+":"+("0"+xe.getMinutes()).slice(-2),Ce=new Date(1e3*e.message.created_time),e.message.created_time=Ce.getFullYear()+"/"+("0"+(Ce.getMonth()+1)).slice(-2)+"/"+("0"+Ce.getDate()).slice(-2)+" "+("0"+Ce.getHours()).slice(-2)+":"+("0"+Ce.getMinutes()).slice(-2)}))}},je=Le,$e=Object(g["a"])(je,ye,Ve,!1,null,null,null),Re=$e.exports;f()($e,{VAvatar:ue["a"],VCard:P["a"],VCol:q["a"],VContainer:z["a"],VImg:me["a"],VRow:G["a"]});var Me=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"bg",attrs:{fluid:"","fill-height":""}},[a("v-layout",{staticClass:"justify-center align-center",attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-card",{staticClass:"mx-auto"},[a("v-img",{attrs:{src:e.railsURL+e.profile.avatar,"max-height":"300px"}},[a("v-card-actions",[a("v-btn",{attrs:{icon:""},on:{click:function(t){e.dialog_avatar=!0}}},[a("v-icon",[e._v("mdi-camera")])],1),a("v-dialog",{attrs:{"retain-focus":!1,persistent:"","max-width":"600px"},model:{value:e.dialog_avatar,callback:function(t){e.dialog_avatar=t},expression:"dialog_avatar"}},[a("v-card",[a("v-card-title",[e._v(" プロフィール画像を変更 ")]),a("input",{ref:"file",attrs:{name:"uploadedImage",type:"file",accept:"image/png, image/jpeg"},on:{change:e.onFileChange}}),a("br"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:e.postItem}},[a("v-icon",[e._v(" mdi-book ")])],1),a("v-btn",{attrs:{icon:""},on:{click:function(t){e.dialog_avatar=!1}}},[a("v-icon",[e._v(" mdi-close ")])],1)],1)],1)],1)],1)],1),a("v-container",[a("v-card-title",[e._v(" "+e._s(e.profile.name)+" ")]),e.profile.birthdate?a("div",[a("v-row",[a("v-card-subtitle",[e._v(" 生年月日 ")])],1),a("v-row",[a("v-col",[e._v(" "+e._s(e.profile.birthdate)+" ")]),a("v-col",[a("v-btn",{attrs:{depressed:""},on:{click:function(t){e.dialog=!0}}},[e._v(" 変更 ")])],1),a("v-dialog",{attrs:{persistent:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("生年月日")])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",[a("v-select",{attrs:{items:e.yearrange,label:"年"},model:{value:e.year,callback:function(t){e.year=t},expression:"year"}})],1),a("v-col",[a("v-select",{attrs:{items:e.monthrange,label:"月"},model:{value:e.month,callback:function(t){e.month=t},expression:"month"}})],1),a("v-col",[a("v-select",{attrs:{items:e.daysrange,label:"日"},model:{value:e.day,callback:function(t){e.day=t},expression:"day"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.dialog=!1}}},[e._v(" Close ")]),a("v-btn",{attrs:{icon:"",dialog:"false"},on:{click:e.registerBirthdate}},[a("v-icon",[e._v(" mdi-check")])],1)],1)],1)],1)],1)],1):a("div",[a("v-card-subtitle",[e._v(" 生年月日が未登録です ")]),a("v-card-actions",[a("v-btn",{on:{click:function(t){e.dialog=!0}}},[e._v(" 登録 ")]),a("v-dialog",{attrs:{persistent:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("生年月日")])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",[a("v-select",{attrs:{items:e.yearrange,label:"年"},model:{value:e.year,callback:function(t){e.year=t},expression:"year"}})],1),a("v-col",[a("v-select",{attrs:{items:e.monthrange,label:"月"},model:{value:e.month,callback:function(t){e.month=t},expression:"month"}})],1),a("v-col",[a("v-select",{attrs:{items:e.daysrange,label:"日"},model:{value:e.day,callback:function(t){e.day=t},expression:"day"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.dialog=!1}}},[e._v(" Close ")]),a("v-btn",{attrs:{icon:"",dialog:"false"},on:{click:e.registerBirthdate}},[a("v-icon",[e._v(" mdi-check")])],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)},Oe=[],Fe=a("2909"),Ae=(a("d81d"),a("cb29"),1930),Te=2030,De=new Array(Te-Ae+1).fill(null).map((function(e,t){return t+Ae})),Ee=1,Ue=12,He=new Array(Ue-Ee+1).fill(null).map((function(e,t){return t+Ee})),Pe=Object(Fe["a"])(Array(31)).map((function(e,t){return t})),Be={data:function(){return{profile:{birthdate:"",avatar:"",name:null},year:"",yearrange:De,month:"",monthrange:He,day:"",daysrange:Pe,dialog:!1,dialog_avatar:!1,comment:"卒業まであとわずか．\n２月にイタリアへの卒業旅行，ちゃんと行けるかなー",post:{},uploadedImage:"",railsURL:"https://13.114.43.226"}},mounted:function(){var e=this;return Object(W["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d().get("/profile/"+localStorage.getItem("id"),{headers:{"access-token":localStorage.getItem("access-token"),uid:localStorage.getItem("uid"),client:localStorage.getItem("client")}}).then((function(t){return e.profile.name=t.data.name,e.profile.avatar=t.data.avatar_url,e.profile.birthdate=t.data.birthdate,console.log(e.profile)}));case 2:case"end":return t.stop()}}),t)})))()},methods:{registerBirthdate:function(){var e=this;d().put("/update_birthdate/",{id:localStorage.getItem("id"),year:this.year,month:this.month,day:this.day},{headers:{"access-token":localStorage.getItem("access-token"),uid:localStorage.getItem("uid"),client:localStorage.getItem("client")}}).then((function(t){return console.log(t),e.$router.push({name:"Home"})}))},onFileChange:function(e){e.preventDefault();var t=e.target.files;this.uploadedImage=t[0],this.profile.avatar=this.uploadedImage,console.log(t),console.log(this.uploadedImage)},postItem:function(){var e=this,t=new FormData;t.append("avatar",this.uploadedImage),t.append("id",localStorage.getItem("id")),console.log(t),d().put("/update_avatar",t,{headers:{"access-token":localStorage.getItem("access-token"),uid:localStorage.getItem("uid"),client:localStorage.getItem("client")}}).then((function(t){e.uploadedImage="",e.$refs.file.value="",e.profile.avatar=t.data.avatar,console.log(t),e.$router.push({name:"Home"})})).catch((function(e){console.log(e)}))}}},qe=Be,ze=(a("2a37"),a("169a")),Ye=a("b974"),Ge=a("2fa4"),Ne=Object(g["a"])(qe,Me,Oe,!1,null,null,null),Je=Ne.exports;f()(Ne,{VBtn:H["a"],VCard:P["a"],VCardActions:B["a"],VCardSubtitle:B["b"],VCardText:B["c"],VCardTitle:B["d"],VCol:q["a"],VContainer:z["a"],VDialog:ze["a"],VFlex:ee["a"],VIcon:Y["a"],VImg:me["a"],VLayout:te["a"],VRow:G["a"],VSelect:Ye["a"],VSpacer:Ge["a"]});var Ke=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{attrs:{wrap:""}},e._l(e.messages,(function(t){return a("v-flex",{key:t.to_data,attrs:{xs12:"",md6:"",lg3:""}},[a("v-card",[a("v-card-title",[e._v(" "+e._s(t.name)+" ")])],1)],1)})),1)},Qe=[],We={data:function(){return{cardsize:"",messages:[{name:"田中 敏之",title:"誕生日おめでとう",body:"lkcnapkcnsakcnakncaspcnakpnakascacaca",from_date:"2021/03/21",to_date:"2021/05/23"},{name:"田中 権左衛門",title:"誕生日おめでとう",body:"lkcnapkcnsakcnakncaspcnakpnakascacaca",from_date:"2021/03/21",to_date:"2021/05/23"}]}},mounted:function(){switch(console.log(this.$vuetify.breakpoint.name),this.$vuetify.breakpoint.name){case"xs":this.cardsize=220;break;case"sm":this.cardsize=400;break;case"md":this.cardsize=500;break;case"lg":this.cardsize=600;break;case"xl":this.cardsize=800;break}}},Xe=We,Ze=Object(g["a"])(Xe,Ke,Qe,!1,null,null,null),et=Ze.exports;f()(Ze,{VCard:P["a"],VCardTitle:B["d"],VFlex:ee["a"],VLayout:te["a"]});var tt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-row",{attrs:{justify:"space-around"}},[a("v-card-text",[a("div",{staticClass:"font-weight-bold"},[e._v(" 2021 ")]),a("v-timeline",{attrs:{"align-top":"",dense:e.$vuetify.breakpoint.smAndDown}},e._l(e.messages,(function(t,n){return a("v-timeline-item",{key:t.time,attrs:{color:t.color,small:""}},[a("v-card",[a("v-row",[a("v-col",{attrs:{cols:"2"}},[a("v-avatar",[a("img",{staticStyle:{"object-fit":"cover"},attrs:{src:e.railsURL+e.avatar_urls[n]}})])],1),a("v-col",{attrs:{cols:"10"}},[a("v-card-subtitle",[e._v(" "+e._s(t.time)+" ← "+e._s(t.created_time)+" ")])],1)],1),a("v-card-title",{staticClass:"justify-center"},[e._v(" "+e._s(t.title)+" ")]),a("v-card-actions",[a("v-btn",{on:{click:function(a){return e.showContent(t,n)}}},[e._v(" 開く ")]),a("v-btn",{on:{click:function(a){return e.deleteMessage(t)}}},[e._v(" 削除 ")])],1)],1)],1)})),1)],1)],1),a("v-btn",{attrs:{icon:""},on:{click:e.lookSending}},[a("v-icon",[e._v(" mdi-star")])],1)],1)},at=[],nt=(a("159b"),""),rt="",st={data:function(){return{messages:[],dialog:!1,railsURL:"https://13.114.43.226",users:[],avatar_urls:[],users_name:[]}},methods:{saveComment:function(){console.log("aaaaa"),console.log(this.messages)},lookSending:function(){this.$router.push({name:"Sending"})},showContent:function(e,t){this.$router.push({name:"MessageContent",params:{message_id:e.id,avatar_url:this.avatar_urls[t],from_name:this.users_name[t]}})},deleteMessage:function(e){var t=this;d().delete("/messages/"+e.id,{headers:{"access-token":localStorage.getItem("access-token"),uid:localStorage.getItem("uid"),client:localStorage.getItem("client")}}).then((function(e){console.log(e),t.$router.go({path:t.$router.currentRoute.path,force:!0})})).catch((function(e){console.log(e)}))}},mounted:function(){var e=this;return Object(W["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d().get("/users/"+localStorage.getItem("id")+"/messages",{headers:{"access-token":localStorage.getItem("access-token"),uid:localStorage.getItem("uid"),client:localStorage.getItem("client")}}).then((function(t){return e.messages=t.data.messages,e.messages.forEach((function(e){return nt=new Date(1e3*e.time),e.time=nt.getFullYear()+"/"+("0"+(nt.getMonth()+1)).slice(-2)+"/"+("0"+nt.getDate()).slice(-2)+" "+("0"+nt.getHours()).slice(-2)+":"+("0"+nt.getMinutes()).slice(-2),rt=new Date(1e3*e.created_time),e.created_time=rt.getFullYear()+"/"+("0"+(rt.getMonth()+1)).slice(-2)+"/"+("0"+rt.getDate()).slice(-2)+" "+("0"+rt.getHours()).slice(-2)+":"+("0"+rt.getMinutes()).slice(-2)})),e.users=t.data.users}));case 2:e.users.forEach((function(t){return d().get("users/"+t.id,{headers:{"access-token":localStorage.getItem("access-token"),uid:localStorage.getItem("uid"),client:localStorage.getItem("client")}}).then((function(t){return e.users_name.push(t.data.name),e.avatar_urls.push(t.data.avatar_url)}))}));case 3:case"end":return t.stop()}}),t)})))()}},ot=st,it=a("8414"),lt=a("1e06"),ct=Object(g["a"])(ot,tt,at,!1,null,null,null),ut=ct.exports;f()(ct,{VAvatar:ue["a"],VBtn:H["a"],VCard:P["a"],VCardActions:B["a"],VCardSubtitle:B["b"],VCardText:B["c"],VCardTitle:B["d"],VCol:q["a"],VContainer:z["a"],VIcon:Y["a"],VRow:G["a"],VTimeline:it["a"],VTimelineItem:lt["a"]});var dt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-row",{staticClass:"mt-10",attrs:{justify:"center"}},[n("v-col",{attrs:{cols:"2"}},[n("v-avatar",{attrs:{size:"100"}},[n("img",{attrs:{src:a("7e8f")}})])],1),n("v-col",{attrs:{cols:"5"}},[n("div",{staticClass:"text-h4"},[n("v-text-field",{attrs:{outlined:"",label:"件名"},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1),n("v-row",[n("v-col",{attrs:{cols:"4"}},[n("v-select",{attrs:{items:e.yearrange,label:"年"},model:{value:e.year,callback:function(t){e.year=t},expression:"year"}})],1),n("v-col",[n("v-select",{attrs:{items:e.monthrange,label:"月"},model:{value:e.month,callback:function(t){e.month=t},expression:"month"}})],1),n("v-col",[n("v-select",{attrs:{items:e.daysrange,label:"日"},model:{value:e.day,callback:function(t){e.day=t},expression:"day"}})],1),n("v-col",[n("v-select",{attrs:{items:e.hoursrange,label:"時"},model:{value:e.hour,callback:function(t){e.hour=t},expression:"hour"}})],1),n("v-col",[n("v-select",{attrs:{items:e.minutesrange,label:"分"},model:{value:e.minute,callback:function(t){e.minute=t},expression:"minute"}})],1)],1)],1),n("v-col",[n("p",[n("label",[e._v("画像")]),n("input",{ref:"file",attrs:{name:"uploadedImage",type:"file",accept:"image/png, image/jpeg"},on:{change:e.onFileChange}}),n("br")])])],1),n("v-row",[n("v-container",{attrs:{fluid:""}},[n("v-textarea",{attrs:{counter:"",label:"メッセージ",height:"300",value:e.value,outlined:""},model:{value:e.body,callback:function(t){e.body=t},expression:"body"}})],1)],1),n("v-row",{attrs:{justify:"end"}},[n("v-card-actions",[n("v-btn",{attrs:{outlined:"",text:""},on:{click:e.sendMessage}},[e._v("送信する")])],1)],1)],1)},mt=[],vt=a("5530"),gt=(a("d3b7"),a("ddb0"),a("2f62")),ht=2021,ft=2100,pt=new Array(ft-ht+1).fill(null).map((function(e,t){return t+ht})),bt=1,_t=12,kt=new Array(_t-bt+1).fill(null).map((function(e,t){return t+bt})),It=1,wt=31,St=new Array(wt-It+1).fill(null).map((function(e,t){return t+It})),yt=Object(Fe["a"])(Array(24)).map((function(e,t){return t})),Vt=Object(Fe["a"])(Array(60).keys()),xt={props:["to_id"],data:function(){return{head:"メッセージ送信",value:null,item_minutes:["0","1","2","3","4","5"],user:[],select:"",to:"",body:"",year:"2021",yearrange:pt,month:"6",monthrange:kt,day:"3",daysrange:St,hour:"",hoursrange:yt,minute:"",minutesrange:Vt,time:[],title:[],message:{},uploadedImage:"",railsURL:"http://localhost:3000"}},computed:Object(vt["a"])({},Object(gt["b"])(["user_token"])),mounted:function(){var e=this;d().get("/users/"+this.to_id,{headers:{"access-token":localStorage.getItem("access-token"),uid:localStorage.getItem("uid"),client:localStorage.getItem("client")}},console.log(this.user_token)).then((function(t){return e.user=t.data,console.log(t)}))},methods:{sendMessage:function(){var e=this,t=new Date(this.year,this.month-1,this.day,this.hour,this.minute),a=new FormData;a.append("image",this.uploadedImage),a.append("from_id",localStorage.getItem("id")),a.append("to_id",this.to_id),a.append("title",this.title),a.append("body",this.body),a.append("time",t.getTime()/1e3),d().post("/users/"+localStorage.getItem("id")+"/messages",a,{headers:{"access-token":localStorage.getItem("access-token"),uid:localStorage.getItem("uid"),client:localStorage.getItem("client")}}).then((function(t){return console.log(t.data),e.$router.push({name:"Send"})}))},onFileChange:function(e){e.preventDefault();var t=e.target.files;this.uploadedImage=t[0],console.log(t),console.log(this.uploadedImage)}}},Ct=xt,Lt=(a("0a5b"),a("a844")),jt=Object(g["a"])(Ct,dt,mt,!1,null,null,null),$t=jt.exports;f()(jt,{VAvatar:ue["a"],VBtn:H["a"],VCardActions:B["a"],VCol:q["a"],VContainer:z["a"],VRow:G["a"],VSelect:Ye["a"],VTextField:ne["a"],VTextarea:Lt["a"]});var Rt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-card",{staticClass:"mt-8"},[a("v-card-title",[e._v(" 大切な人を検索 ")]),a("v-card-text",[a("v-text-field",{attrs:{outlined:"",label:"メールアドレス"},model:{value:e.mail,callback:function(t){e.mail=t},expression:"mail"}})],1),a("v-card-actions",[a("v-btn",{on:{click:e.searchUser}},[e._v(" 検索 ")])],1),a("v-col",[e._v(" "+e._s(e.userSearched.name)+" ")]),a("v-col",[e.userSearched.id>0?a("v-btn",{on:{click:function(t){return e.followFeind(e.userSearched.id)}}},[e._v(" 申請 ")]):e._e()],1)],1),a("v-card",{staticClass:"mt-8"},[a("v-card-title",[e._v(" 申請中 ")]),a("v-list",e._l(e.toFriend,(function(t,n){return a("v-list-item",{key:n},[a("v-list-item-content",[a("v-list-item-title",[e._v(" "+e._s(t.name)+" ")])],1),a("v-list-item-action",[a("v-btn",{on:{click:function(a){return e.destroyFriend(t.id)}}},[e._v(" 削除 ")])],1)],1)})),1)],1),a("v-card",{staticClass:"mt-8"},[a("v-card-title",[e._v(" 保留中 ")]),a("v-list",e._l(e.fromFriend,(function(t,n){return a("v-list-item",{key:n},[a("v-list-item-content",[a("v-list-item-title",[e._v(" "+e._s(t.name)+" ")])],1),a("v-list-item-action",[a("v-btn",{on:{click:function(a){return e.acceptFriend(t.id)}}},[e._v(" 承諾 ")]),a("v-btn",{on:{click:function(a){return e.destroyFriend(t.id)}}},[e._v(" 削除 ")])],1)],1)})),1)],1)],1)},Mt=[],Ot={data:function(){return{toFriend:{},fromFriend:{},status:"",userSearched:{},mail:""}},mounted:function(){var e=this;d().get("/users/"+localStorage.getItem("id")+"/followings",{headers:{"access-token":localStorage.getItem("access-token"),uid:localStorage.getItem("uid"),client:localStorage.getItem("client")}}).then((function(t){return e.toFriend=t.data,console.log(t.data)})),d().get("/users/"+localStorage.getItem("id")+"/followers",{headers:{"access-token":localStorage.getItem("access-token"),uid:localStorage.getItem("uid"),client:localStorage.getItem("client")}}).then((function(t){return e.fromFriend=t.data,console.log(t.data)}))},methods:{destroyFriend:function(e){var t=this;console.log(e),d().delete("/users/"+e+"/relationships",{headers:{"access-token":localStorage.getItem("access-token"),uid:localStorage.getItem("uid"),client:localStorage.getItem("client")}}).then((function(e){return t.status=e.data.status,console.log(e),t.$router.push({name:"Home"})}))},acceptFriend:function(e){var t=this;console.log(e),d().put("/users/"+e+"/relationships",{status:"true"},{headers:{"access-token":localStorage.getItem("access-token"),uid:localStorage.getItem("uid"),client:localStorage.getItem("client")}}).then((function(e){return t.status=e.data.status,console.log(e),t.$router.push({name:"Home"})}))},searchUser:function(){var e=this;d().get("/users/"+localStorage.getItem("id")+"/search",{params:{email:this.mail}},{headers:{"access-token":localStorage.getItem("access-token"),uid:localStorage.getItem("uid"),client:localStorage.getItem("client")}}).then((function(t){return console.log(t),e.userSearched=t.data,console.log(e.userSearched)}))},followFeind:function(e){var t=this;console.log(e),d().post("/users/"+e+"/relationships",{user_id:e},{headers:{"access-token":localStorage.getItem("access-token"),uid:localStorage.getItem("uid"),client:localStorage.getItem("client")}}).then((function(e){return console.log(e),t.$router.push({name:"Home"})}))}}},Ft=Ot,At=Object(g["a"])(Ft,Rt,Mt,!1,null,null,null),Tt=At.exports;f()(At,{VBtn:H["a"],VCard:P["a"],VCardActions:B["a"],VCardText:B["c"],VCardTitle:B["d"],VCol:q["a"],VContainer:z["a"],VList:_["a"],VListItem:k["a"],VListItemAction:ve["a"],VListItemContent:w["a"],VListItemTitle:w["b"],VTextField:ne["a"]});var Dt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",e._l(e.messages,(function(t,n){return a("v-list-item",{key:t.time},[a("v-card",{attrs:{height:"100",width:"800"}},[a("v-row",[a("v-col",{attrs:{cols:"3"}},[a("v-avatar",[a("img",{attrs:{src:e.railsURL+e.avatar_urls[n]}})])],1),a("v-col",{attrs:{cols:"9"}},[e._v(" "+e._s(e.user_names[n])+"さんからメッセージが届きます ")])],1)],1)],1)})),1)},Et=[],Ut="",Ht="",Pt={data:function(){return{messages:[],dialog:!1,railsURL:"https://13.114.43.226",user_names:[],users:[],avatar_urls:[]}},methods:{},mounted:function(){var e=this;return Object(W["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d().get("/sending/",{headers:{"access-token":localStorage.getItem("access-token"),uid:localStorage.getItem("uid"),client:localStorage.getItem("client")}}).then((function(t){return console.log(t),e.messages=t.data.messages,e.messages.forEach((function(e){return Ut=new Date(1e3*e.time),e.time=Ut.getFullYear()+"/"+("0"+(Ut.getMonth()+1)).slice(-2)+"/"+("0"+Ut.getDate()).slice(-2)+" "+("0"+Ut.getHours()).slice(-2)+":"+("0"+Ut.getMinutes()).slice(-2),Ht=new Date(1e3*e.created_time),e.created_time=Ht.getFullYear()+"/"+("0"+(Ht.getMonth()+1)).slice(-2)+"/"+("0"+Ht.getDate()).slice(-2)+" "+("0"+Ht.getHours()).slice(-2)+":"+("0"+Ht.getMinutes()).slice(-2)})),e.users=t.data.users}));case 2:e.users.forEach((function(t){return d().get("users/"+t.id,{headers:{"access-token":localStorage.getItem("access-token"),uid:localStorage.getItem("uid"),client:localStorage.getItem("client")}}).then((function(t){return e.user_names.push(t.data.name),e.avatar_urls.push(t.data.avatar_url)}))}));case 3:case"end":return t.stop()}}),t)})))()}},Bt=Pt,qt=Object(g["a"])(Bt,Dt,Et,!1,null,null,null),zt=qt.exports;f()(qt,{VAvatar:ue["a"],VCard:P["a"],VCol:q["a"],VContainer:z["a"],VListItem:k["a"],VRow:G["a"]}),n["a"].use(A["a"]);var Yt=[{path:"/",name:"Login",component:se,meta:{isPublic:!0}},{path:"/home",name:"Home",component:J},{path:"/send",name:"Send",component:pe,props:!0},{path:"/received",name:"Received",component:Se},{path:"/profile",name:"Profile",component:Je},{path:"/test",name:"Test",component:et},{path:"/timeline",name:"TimeLine",component:ut},{path:"/sendmessage",name:"SendMessage",component:$t,props:!0},{path:"/messagecontent",name:"MessageContent",component:Re},{path:"/showrequest",name:"ShowRequest",component:Tt},{path:"/sending",name:"Sending",component:zt}],Gt=new A["a"]({mode:"history",base:"/sakura-front/",routes:Yt});Gt.beforeEach((function(e,t,a){e.matched.some((function(e){return!e.meta.isPublic}))&&!localStorage.getItem("access-token")?a({name:"Login",query:{redirect:e.fullPath}}):a()}));var Nt=Gt,Jt=a("0e44");n["a"].use(gt["a"]);var Kt=new gt["a"].Store({state:{user_token:{uid:"","access-token":"",client:""},flash_message:{status:!1,messasge:""},timeline:""},mutations:{USER_LOGIN:function(e,t){e.user_token=t},setMessage:function(e,t){e.flash_message=t},editComment:function(e,t){e.timeline=t}},actions:{userLogin:function(e,t){return Object(W["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.commit,n("USER_LOGIN",t),a.abrupt("return",t);case 3:case"end":return a.stop()}}),a)})))()},editComment:function(e,t){return Object(W["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.commit,n("editComment",t),a.abrupt("return",t);case 3:case"end":return a.stop()}}),a)})))()}},plugins:[Object(Jt["a"])({})],modules:{}}),Qt=a("f309");n["a"].use(Qt["a"]);var Wt=new Qt["a"]({});n["a"].config.productionTip=!1,new n["a"]({router:Nt,store:Kt,vuetify:Wt,render:function(e){return e(F)}}).$mount("#app")},"5ccf":function(e,t,a){},"6e65":function(e,t,a){},"7e8f":function(e,t,a){e.exports=a.p+"img/cat.62eb8506.jpg"},"7f4e":function(e,t,a){"use strict";a("6e65")},"93cb":function(e,t,a){"use strict";a("1dc2")}});
//# sourceMappingURL=app.f5c8034f.js.map